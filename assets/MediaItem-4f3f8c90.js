import{n as $,p as k,q as b,h as l,r as p,o as a,c as m,f as s,u as y,i as g,t as c,d as f,m as x,a as v,b as R,F as w,l as S,w as T,e as D,x as F,s as B}from"./index-254ceb3b.js";const A=$("trailer",{state:()=>({url:"https://api.themoviedb.org/3/",movie:null,tv:null}),actions:{async getTrailer({type:t,id:e}){try{let i=await k.get(`${this.url}${t}/${e}/videos?api_key=${b}&language=ru-RU`);t=="movie"?this.movie=res.data.results:t=="tv"&&(this.tv=res.data.results)}catch{console.error("ошибка при получении trailer")}}}}),C={class:"main__intro"},L=["src"],M={class:"main__intro-block"},N={class:"main__intro-left"},U={class:"main__intro-left-title"},V={class:"main__intro-left-text"},Y={class:"main__intro-left-descr"},j={class:"main__intro-right"},z=["src"],O={class:"main__intro-actors"},q=s("h2",{class:"main__intro-actors-title"},"В главных ролях",-1),E={class:"main__intro-actors-casts"},G={__name:"Intro",props:{type:String,item:Object},setup(t){const e=t,i=A();i.getTrailer({type:e.type,id:e.item.id});const o=l(()=>e.type=="movie"?i.movie:e.type=="tv"?i.tv:""),r=l(()=>new Date(e.item.release_date).getFullYear()||new Date(e.item.first_air_date).getFullYear()),n=l(()=>e.item.genres.reduce((_,d)=>_+`, ${d.name}`,"")),h=l(()=>{let _=e.type=="movie"?e.item.runtime:e.type=="tv"?e.item.episode_run_time:"",d=Math.floor(_/60),u=_%60;return d==0?u+"m":d+"h "+u+"m"});return(_,d)=>{const u=p("Trailer"),I=p("Actors");return a(),m("div",C,[s("img",{src:y(g)+t.item.poster_path,alt:"",class:"main__intro-img"},null,8,L),s("div",M,[s("div",N,[s("h1",U,c(t.item.title||t.item.name),1),s("p",V,c(t.item.overview||"Нет описания"),1),s("p",Y,[s("span",null,c(r.value)+c(n.value),1),s("span",null,c(h.value),1)]),o.value&&o.value.length>0?(a(),f(u,{key:0,id:o.value[0].key},null,8,["id"])):x("",!0)]),s("div",j,[s("img",{src:y(g)+t.item.backdrop_path,alt:""},null,8,z)]),s("div",O,[q,s("div",E,[v(I,{type:e.type,id:t.item.id,count:"6"},null,8,["type","id"])])])])])}}},K={key:0,class:"main__recommend"},H={class:"container"},J=s("h2",{class:"main__recommend-title"},"Рекомендации",-1),P={class:"main__recommend-list"},Q={alt:"",class:"main__recommend-list-item-img"},W={class:"main__recommend-list-item-title"},X={__name:"Recommend",props:{rec:Array,type:String},setup(t){return(e,i)=>{const o=p("router-link"),r=R("lazy");return t.rec?(a(),m("div",K,[s("div",H,[J,s("div",P,[(a(!0),m(w,null,S(t.rec,n=>(a(),f(o,{key:n.id,to:`${n.id}`,class:"main__recommend-list-item"},{default:T(()=>[D(s("img",Q,null,512),[[r,y(g)+n.backdrop_path]]),s("h2",W,c(n.title||n.name),1)]),_:2},1032,["to"]))),128))])])])):x("",!0)}}},Z={class:"main__info"},ee={class:"main__info-item-name"},te={class:"main__info-item-info"},se={__name:"Info",props:{item:Object},setup(t){const e=t,i=l(()=>[{name:"Бюджет",info:e.item.budget},{name:"Сборы",info:e.item.revenue},{name:"Статус",info:e.item.status},{name:"Исходное название",info:e.item.original_title||e.item.original_name}]);return(o,r)=>(a(),m("div",Z,[(a(!0),m(w,null,S(i.value,n=>(a(),m("div",{class:"main__info-item",key:n.name},[s("span",ee,c(n.name),1),s("span",te,c(n.info?"$"+n.info:"Неизвестно"),1)]))),128))]))}},ie=$("recommend",{state:()=>({url:"https://api.themoviedb.org/3/",movies:null,tvs:null}),actions:{async getRecommend({type:t,id:e}){try{let i=await k.get(`${this.url}${t}/${e}/recommendations?api_key=${b}&language=ru-RU`);t=="movie"?this.movies=i.data.results:t=="tv"&&(this.tvs=i.data.results)}catch{console.error("ошибка при получении рекомендуемых данных")}}}}),ne={key:0,class:"main__media"},oe={__name:"MediaItem",props:{type:String},setup(t){const e=t,i=ie(),o=F(),r=B();r.getItemId({type:e.type,id:o.params.id}),i.getRecommend({type:e.type,id:o.params.id});const n=l(()=>e.type=="movie"?r.movie:e.type=="tv"?r.tv:""),h=l(()=>e.type=="movie"?i.movies.slice(0,4):e.type=="tv"?i.tvs.slice(0,4):"");return(_,d)=>{const u=p("Loader");return n.value?(a(),m("div",ne,[v(G,{type:t.type,item:n.value},null,8,["type","item"]),v(se,{item:n.value},null,8,["item"]),v(X,{type:t.type,rec:h.value},null,8,["type","rec"])])):(a(),f(u,{key:1}))}}};export{oe as _};
